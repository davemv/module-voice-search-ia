<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <type name="Magento\Framework\Console\CommandList">
    <arguments>
        <argument name="commands" xsi:type="array">
            <item name="ntt_voice_index_embeddings" xsi:type="object">
                NTT\VoiceSearch\Console\Command\IndexEmbeddings
            </item>

            <item name="voice_export" xsi:type="object">
                NTT\VoiceSearch\Console\ExportCorrections
            </item>
            <item name="voice_import" xsi:type="object">
                NTT\VoiceSearch\Console\ImportCorrections
            </item>
            <item name="voice_ping" xsi:type="object">
                NTT\VoiceSearch\Console\Ping
            </item>
            <item name="voice_ai_ping" xsi:type="object">
                NTT\VoiceSearch\Console\DiagnoseAi
            </item>
        </argument>
    </arguments>
</type>
    <preference for="NTT\VoiceSearch\Model\Ai\EmbeddingProviderInterface"
            type="NTT\VoiceSearch\Model\Ai\RouterProvider"/>


    <type name="NTT\VoiceSearch\Logger\Handler">
        <arguments>
            <argument name="fileName" xsi:type="string">/var/log/ntt_voice_ai.log</argument>
        </arguments>
    </type>
    <type name="NTT\VoiceSearch\Logger\Logger">
        <arguments>
            <argument name="name" xsi:type="string">ntt_voice_ai</argument>
            <argument name="handlers" xsi:type="array">
                <item name="stream" xsi:type="object">NTT\VoiceSearch\Logger\Handler</item>
            </argument>
        </arguments>
    </type>
    <preference for="NTT\VoiceSearch\Api\SynonymRepositoryInterface"
            type="NTT\VoiceSearch\Model\Nlp\JsonSynonymRepository"/>

    <type name="NTT\VoiceSearch\Observer\NlpPredispatch">
        <arguments>
            <argument name="aiLogger" xsi:type="object">NTT\VoiceSearch\Logger\Logger</argument>
        </arguments>
    </type>


</config>
